<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Name-wise matrix multiplication — matrixproduct_byname • matsbyname</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Name-wise matrix multiplication — matrixproduct_byname"><meta name="description" content="Multiplies operands from left to right
(when .summarise = FALSE).
If .summarise = TRUE,
operands are multiplied from first to last."><meta property="og:description" content="Multiplies operands from left to right
(when .summarise = FALSE).
If .summarise = TRUE,
operands are multiplied from first to last."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">matsbyname</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/matsbyname.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/about-vector-arguments.html">About Vector Arguments</a></li>
    <li><a class="dropdown-item" href="../articles/aggregation-vignette.html">Aggregation in `matsbyname`</a></li>
    <li><a class="dropdown-item" href="../articles/applybyname-vignette.html">Writing Custom Functions for `matsbyname`</a></li>
    <li><a class="dropdown-item" href="../articles/using-summarise-in-matsbyname.html">Using summarise in matsbyname</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MatthewHeun/matsbyname/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Name-wise matrix multiplication</h1>
      <small class="dont-index">Source: <a href="https://github.com/MatthewHeun/matsbyname/blob/v0.6.11/R/Binary.R" class="external-link"><code>R/Binary.R</code></a></small>
      <div class="d-none name"><code>matrixproduct_byname.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Multiplies operands from left to right
(when <code>.summarise = FALSE</code>).
If <code>.summarise = TRUE</code>,
operands are multiplied from first to last.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="va">...</span>, .summarise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Operands; constants, matrices, or lists of matrices.</p></dd>


<dt id="arg--summarise">.summarise<a class="anchor" aria-label="anchor" href="#arg--summarise"></a></dt>
<dd><p>When <code>TRUE</code>, a matrix multiplication proceeds down lists of arguments.
When <code>FALSE</code> (the default), items are multiplied across lists.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix representing the name-wise product of operands.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Performs a union and sorting of multiplicand rows and multiplier columns by name
prior to multiplication.
Zeroes are inserted for missing matrix elements.
Doing so ensures that
the dimensions of multiplicand and multiplier matrices will be conformable.
I.e., the number of columns in multiplicand
will equal the number of rows in multiplier,
so long as the column names of multiplicand are unique and
the row names of multiplier are unique.
If column type of the multiplicand is not same as
row type of the multiplier on any step of the multiplication,
the function will fail.
The result is matrix product
with row names from the first multiplicand and column names from the last multiplier.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">V</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, ncol <span class="op">=</span> <span class="fl">3</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"i1"</span>, <span class="st">"i2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span>, <span class="st">"c3"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Industries"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"Commodities"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">G</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, ncol <span class="op">=</span> <span class="fl">2</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c2"</span>, <span class="st">"c1"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"i2"</span>, <span class="st">"i1"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Commodities"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"Industries"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">11</span><span class="op">:</span><span class="fl">14</span>, ncol <span class="op">=</span> <span class="fl">2</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"i1"</span>, <span class="st">"i2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s1"</span>, <span class="st">"s2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Industries"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"Sectors"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Succeeds because G is completed to include a row named c3 (that contains zeroes).</span></span></span>
<span class="r-in"><span><span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="va">V</span>, <span class="va">G</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    i1 i2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 13  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 20  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">V</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">G</span> <span class="co"># \dontrun{} # Fails because E lacks a row named c3.</span></span></span>
<span class="r-in"><span><span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="va">V</span>, <span class="va">G</span>, <span class="va">Z</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     s1  s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 203 239</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 316 372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Sectors"</span>
<span class="r-in"><span><span class="co"># This also works with lists</span></span></span>
<span class="r-in"><span><span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">V</span>,<span class="va">V</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">G</span>,<span class="va">G</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    i1 i2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 13  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 20  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    i1 i2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 13  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 20  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">DF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>V <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, G <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DF</span><span class="op">[[</span><span class="fl">1</span>,<span class="st">"V"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">V</span></span></span>
<span class="r-in"><span><span class="va">DF</span><span class="op">[[</span><span class="fl">2</span>,<span class="st">"V"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">V</span></span></span>
<span class="r-in"><span><span class="va">DF</span><span class="op">[[</span><span class="fl">1</span>,<span class="st">"G"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">G</span></span></span>
<span class="r-in"><span><span class="va">DF</span><span class="op">[[</span><span class="fl">2</span>,<span class="st">"G"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">G</span></span></span>
<span class="r-in"><span><span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="va">DF</span><span class="op">$</span><span class="va">V</span>, <span class="va">DF</span><span class="op">$</span><span class="va">G</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    i1 i2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 13  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 20  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    i1 i2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 13  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 20  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">DF</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>matprods <span class="op">=</span> <span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="va">V</span>, <span class="va">G</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              V          G     matprods</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1, 2, 3,.... 1, 2, 3, 4 13, 20, 5, 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1, 2, 3,.... 1, 2, 3, 4 13, 20, 5, 8</span>
<span class="r-in"><span><span class="co"># Also works with lists, multiplying down the lists if `.summarise = TRUE`.</span></span></span>
<span class="r-in"><span><span class="fu">matrixproduct_byname</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">V</span>, <span class="va">G</span>, <span class="va">Z</span><span class="op">)</span>, .summarise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     s1  s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i1 203 239</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i2 316 372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industries"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Sectors"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

