<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reallocate values from one row or column to another — reallocate_byname • matsbyname</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reallocate values from one row or column to another — reallocate_byname"><meta name="description" content="There are situations where it is helpful to
reallocate values from one row or column to another,
in proportion to remaining values in corresponding columns or rows.
This function performs the reallocation operation.
See examples."><meta property="og:description" content="There are situations where it is helpful to
reallocate values from one row or column to another,
in proportion to remaining values in corresponding columns or rows.
This function performs the reallocation operation.
See examples."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">matsbyname</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/matsbyname.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/about-vector-arguments.html">About Vector Arguments</a></li>
    <li><a class="dropdown-item" href="../articles/aggregation-vignette.html">Aggregation in `matsbyname`</a></li>
    <li><a class="dropdown-item" href="../articles/applybyname-vignette.html">Writing Custom Functions for `matsbyname`</a></li>
    <li><a class="dropdown-item" href="../articles/using-summarise-in-matsbyname.html">Using summarise in matsbyname</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MatthewHeun/matsbyname/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reallocate values from one row or column to another</h1>
      <small class="dont-index">Source: <a href="https://github.com/MatthewHeun/matsbyname/blob/v0.6.12/R/reallocate.R" class="external-link"><code>R/reallocate.R</code></a></small>
      <div class="d-none name"><code>reallocate_byname.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>There are situations where it is helpful to
reallocate values from one row or column to another,
in proportion to remaining values in corresponding columns or rows.
This function performs the reallocation operation.
See examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">reallocate_byname</span><span class="op">(</span></span>
<span>  <span class="va">a</span>,</span>
<span>  rowcolnames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  margin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  .zero_behaviour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"error"</span>, <span class="st">"warning"</span>, <span class="st">"zeroes"</span>, <span class="st">"allocate equally"</span><span class="op">)</span>,</span>
<span>  piece <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  pattern_type <span class="op">=</span> <span class="st">"exact"</span>,</span>
<span>  prepositions <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/RCLabels/reference/prepositions_list.html" class="external-link">prepositions_list</a></span>,</span>
<span>  notation <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/RCLabels/reference/notations_list.html" class="external-link">notations_list</a></span>,</span>
<span>  inf_notation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  choose_most_specific <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-a">a<a class="anchor" aria-label="anchor" href="#arg-a"></a></dt>
<dd><p>A matrix or a list of matrices.</p></dd>


<dt id="arg-rowcolnames">rowcolnames<a class="anchor" aria-label="anchor" href="#arg-rowcolnames"></a></dt>
<dd><p>The names of the rows or columns to be redistributed.</p></dd>


<dt id="arg-margin">margin<a class="anchor" aria-label="anchor" href="#arg-margin"></a></dt>
<dd><p>The margin of the matrix on which the <code>rowcolnames</code> are located.
Default is <code>c(1, 2)</code>, meaning that both rows (<code>1</code>) and columns (<code>2</code>)
will be checked for <code>rowcolnames</code> and redistributed.</p></dd>


<dt id="arg--zero-behaviour">.zero_behaviour<a class="anchor" aria-label="anchor" href="#arg--zero-behaviour"></a></dt>
<dd><p>Tells how to proceed when remaining (i.e., unallocated)
rows or columns are all zero.
Default is "error", which throws an error.
See details for other options.</p></dd>


<dt id="arg-piece">piece<a class="anchor" aria-label="anchor" href="#arg-piece"></a></dt>
<dd><p>The piece of row or column names to be assessed.
Default is "all", indicating that the entire label will be assessed.</p></dd>


<dt id="arg-pattern-type">pattern_type<a class="anchor" aria-label="anchor" href="#arg-pattern-type"></a></dt>
<dd><p>The pattern type desired. Default is "exact".
Other options are "leading", "trailing", "anywhere",
and "literal".
See <code><a href="https://matthewheun.github.io/RCLabels/reference/make_or_pattern.html" class="external-link">RCLabels::make_or_pattern()</a></code> for details.</p></dd>


<dt id="arg-prepositions">prepositions<a class="anchor" aria-label="anchor" href="#arg-prepositions"></a></dt>
<dd><p>Prepositions used by <code><a href="select_rowcol_piece_byname.html">select_rowcol_piece_byname()</a></code>
for row and column name matching.
Default is <a href="https://matthewheun.github.io/RCLabels/reference/prepositions_list.html" class="external-link">RCLabels::prepositions_list</a>.</p></dd>


<dt id="arg-notation">notation<a class="anchor" aria-label="anchor" href="#arg-notation"></a></dt>
<dd><p>The row or column notation used by <code><a href="select_rowcol_piece_byname.html">select_rowcol_piece_byname()</a></code>
for row and column name matching.
Default is <a href="https://matthewheun.github.io/RCLabels/reference/notations_list.html" class="external-link">RCLabels::notations_list</a>.</p></dd>


<dt id="arg-inf-notation">inf_notation<a class="anchor" aria-label="anchor" href="#arg-inf-notation"></a></dt>
<dd><p>A boolean used by <code><a href="select_rowcol_piece_byname.html">select_rowcol_piece_byname()</a></code>
that tells whether to infer notation for rows and columns.
Default is <code>TRUE</code>.
See <code><a href="https://matthewheun.github.io/RCLabels/reference/infer_notation.html" class="external-link">RCLabels::infer_notation()</a></code> for details.</p></dd>


<dt id="arg-choose-most-specific">choose_most_specific<a class="anchor" aria-label="anchor" href="#arg-choose-most-specific"></a></dt>
<dd><p>A boolean used by <code><a href="select_rowcol_piece_byname.html">select_rowcol_piece_byname()</a></code>
that tells whether to choose the most specific
notation from <code>notation</code> when inferring notation.
Default is <code>FALSE</code> so that a less specific notation can be
inferred.
In combination with <a href="https://matthewheun.github.io/RCLabels/reference/notations_list.html" class="external-link">RCLabels::notations_list</a>,
the default value of <code>FALSE</code> means that
<a href="https://matthewheun.github.io/RCLabels/reference/bracket_notation.html" class="external-link">RCLabels::bracket_notation</a> will be selected instead of
anything more specific, such as
<a href="https://matthewheun.github.io/RCLabels/reference/from_notation.html" class="external-link">RCLabels::from_notation</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A modified version of <code>a</code> with <code>rowcolnames</code> redistributed.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function will provide answers, but
it is unlikely that the answers will be meaningful, when the
remaining data (the rows or columns not being allocated)
contain negative numbers.</p>
<p>When the remaining rows or columns not being reallocated
contain zeroes, the result is determined by <code>.zero_behaviour</code>.
Options are one of:</p><ul><li><p>"error" (the default) to throw an error.</p></li>
<li><p>"warning" to issue a warning but continue execution. Be careful with this option!</p></li>
<li><p>"zeroes" to return zeroes in the row or column with zeroes. Note that "zeroes" and "warning" return the same value. "zeroes" does so without a warning.</p></li>
<li><p>"allocate equally" to equally allocate across remaining rows or columns.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>              <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>,</span></span>
<span class="r-in"><span>              <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>            nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>            dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"r1"</span>, <span class="st">"r2"</span>, <span class="st">"r3"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span>, <span class="st">"c3"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    c1 c2 c3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r1  1  2  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r2  4  5  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r3  7  8  9</span>
<span class="r-in"><span><span class="co"># Move row 3 into the other rows (r1 and r2) proportionally</span></span></span>
<span class="r-in"><span><span class="fu">reallocate_byname</span><span class="op">(</span><span class="va">m</span>, rowcolnames <span class="op">=</span> <span class="st">"r3"</span>, margin <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     c1        c2 c3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r1 2.4  4.285714  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r2 9.6 10.714286 12</span>
<span class="r-in"><span><span class="co"># Move column 2 into the other columns (c1 and c3) proportionally</span></span></span>
<span class="r-in"><span><span class="fu">reallocate_byname</span><span class="op">(</span><span class="va">m</span>, rowcolnames <span class="op">=</span> <span class="st">"c2"</span>, margin <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      c1   c3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r1  1.5  4.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r2  6.0  9.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r3 10.5 13.5</span>
<span class="r-in"><span><span class="co"># Demonstrate different options for reallocating when zeroes remain.</span></span></span>
<span class="r-in"><span><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>,  <span class="fl">0</span>,</span></span>
<span class="r-in"><span>               <span class="fl">4</span>, <span class="fl">5</span>,  <span class="fl">0</span>,</span></span>
<span class="r-in"><span>               <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">10</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>             nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>             dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"r1"</span>, <span class="st">"r2"</span>, <span class="st">"r3"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>             <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span>, <span class="st">"c3"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    c1 c2 c3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r1  1  2  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r2  4  5  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r3  7  8 10</span>
<span class="r-in"><span><span class="fu">reallocate_byname</span><span class="op">(</span><span class="va">m2</span>, rowcolnames <span class="op">=</span> <span class="st">"r3"</span>, margin <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                  .zero_behaviour <span class="op">=</span> <span class="st">"zeroes"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     c1        c2 c3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r1 2.4  4.285714  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r2 9.6 10.714286  0</span>
<span class="r-in"><span><span class="fu">reallocate_byname</span><span class="op">(</span><span class="va">m2</span>, rowcolnames <span class="op">=</span> <span class="st">"r3"</span>, margin <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                  .zero_behaviour <span class="op">=</span> <span class="st">"allocate equally"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     c1        c2 c3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r1 2.4  4.285714  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r2 9.6 10.714286  5</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># "error" will cause an error to be emitted.</span></span></span>
<span class="r-in"><span><span class="fu">reallocate_byname</span><span class="op">(</span><span class="va">m2</span>, rowcolnames <span class="op">=</span> <span class="st">"r3"</span>, margin <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                  .zero_behaviour <span class="op">=</span> <span class="st">"error"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># "warning" will cause a warning to be emitted</span></span></span>
<span class="r-in"><span><span class="co"># and will return a result that is the same as "zeroes".</span></span></span>
<span class="r-in"><span><span class="fu">reallocate_byname</span><span class="op">(</span><span class="va">m2</span>, rowcolnames <span class="op">=</span> <span class="st">"r3"</span>, margin <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                  .zero_behaviour <span class="op">=</span> <span class="st">"warning"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

