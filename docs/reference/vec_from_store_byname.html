<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a vector with labels from a matrix and values from a vector store — vec_from_store_byname • matsbyname</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a vector with labels from a matrix and values from a vector store — vec_from_store_byname"><meta property="og:description" content="When a matrix is multiplied by a vector byname,
naming can be tricky.
There are times when pieces of the vector labels should be matched to
pieces of the matrix labels.
This function helps by performing the matching byname.
For this function, vector v is considered a store of values
from which the output vector is created
using special matching rules between a and v."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matsbyname</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.25</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/matsbyname.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/about-vector-arguments.html">About Vector Arguments</a>
    </li>
    <li>
      <a href="../articles/applybyname-vignette.html">Writing Custom Functions for `matsbyname`</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/MatthewHeun/matsbyname/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a vector with labels from a matrix and values from a vector store</h1>
    <small class="dont-index">Source: <a href="https://github.com/MatthewHeun/matsbyname/blob/HEAD/R/Utilities.R" class="external-link"><code>R/Utilities.R</code></a></small>
    <div class="hidden name"><code>vec_from_store_byname.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>When a matrix is multiplied by a vector byname,
naming can be tricky.
There are times when pieces of the vector labels should be matched to
pieces of the matrix labels.
This function helps by performing the matching byname.
For this function, vector <code>v</code> is considered a store of values
from which the output vector is created
using special matching rules between <code>a</code> and <code>v</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">vec_from_store_byname</span><span class="op">(</span>
  <span class="va">a</span>,
  <span class="va">v</span>,
  a_piece <span class="op">=</span> <span class="st">"all"</span>,
  v_piece <span class="op">=</span> <span class="st">"all"</span>,
  colname <span class="op">=</span> <span class="cn">NULL</span>,
  column <span class="op">=</span> <span class="cn">TRUE</span>,
  notation <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">is.list</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>     <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/RCLabels/man/bracket_notation.html" class="external-link">bracket_notation</a></span><span class="op">)</span> <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>    
    <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/RCLabels/man/bracket_notation.html" class="external-link">bracket_notation</a></span> <span class="op">}</span>,
  prepositions <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">is.list</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>     <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/RCLabels/man/prepositions.html" class="external-link">prepositions</a></span><span class="op">)</span> <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>    
    <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/RCLabels/man/prepositions.html" class="external-link">prepositions</a></span> <span class="op">}</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>a</dt>
<dd><p>A matrix from which row or column labels are taken.
Can also be a list or the name of a column in a data frame.</p></dd>
<dt>v</dt>
<dd><p>A vector from which values are taken, when <code>a_piece</code> matches <code>v_piece</code>.
Can also be a list or the name of a column in a data frame.</p></dd>
<dt>a_piece</dt>
<dd><p>The piece of labels on <code>a</code> that is to be matched. Default is "all".</p></dd>
<dt>v_piece</dt>
<dd><p>The piece of labels on <code>v</code> that is to be matched. Default is "all".</p></dd>
<dt>colname</dt>
<dd><p>The name of the output vector's 1-sized dimension
(the only column if <code>column</code> is <code>TRUE</code>, the only row otherwise).
Default is <code>NULL</code>, meaning that the name of the 1-sized dimension in <code>v</code>
should be used.</p></dd>
<dt>column</dt>
<dd><p>Tells whether a column vector (if <code>TRUE</code>, the default) or a row vector (if <code>FALSE</code>) should be created.</p></dd>
<dt>notation</dt>
<dd><p>The notation for the row and column labels.
Default is <code><a href="https://rdrr.io/pkg/RCLabels/man/bracket_notation.html" class="external-link">RCLabels::bracket_notation</a></code>, wrapped as a list if <code>a</code> is a list.</p></dd>
<dt>prepositions</dt>
<dd><p>The strings that will count for prepositions.
Default is <code>RCLables::prepositions</code>, wrapped as a list if <code>a</code> is a list..</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A vector with names from <code>a</code> and values from <code>v</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The output of this function is a vector
(a column vector if <code>column</code> is <code>TRUE</code>, the default;
a row vector if <code>column</code> is <code>FALSE</code>).
The label of the size = 1 dimension is taken from <code>colname</code>
(so named, because the default is to return a column vector).
The labels of the long dimension are taken from matrix <code>a</code>
(the row names of <code>a</code> if <code>column</code> is <code>TRUE</code>;
the column names of <code>a</code> if <code>column</code> is <code>FALSE</code>).
The values of the output vector are obtained from v
when <code>a_piece</code> matches <code>v_piece</code> using the <code>RCLabels</code> package.
The <code>v_piece</code>s of <code>v</code> must be unique.
The default values for <code>a_piece</code> and <code>v_piece</code> are "all",
meaning that the entire label should be matched.
Other options for <code>a_piece</code> and <code>v_piece</code> are "pref" and "suff",
which will match the prefix or suffix of the labels.
Alternatively, prepositions can be given such that
objects of prepositions will be matched.
Examples include "from" or "in".
Row and column types from <code>v</code> are applied to the output.
If the piece given in <code>a_piece</code> is not present in row or column names of <code>a</code>,
<code>NA_real_</code> is returned.
If the piece given in <code>v_piece</code> is not present in row or column names of <code>v</code>,
<code>NA_real_</code> is returned.</p>
<p>Note that <code>notation</code> and <code>prepositions</code> should be lists if <code>a</code> is a list
but a single value otherwise.
The default values of <code>notation</code> and <code>prepositions</code> take care of this requirement,
switching on the type of <code>a</code> (list or not).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">42</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">5</span>, </span>
<span class="r-in">            dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Electricity [from b in c]"</span>, </span>
<span class="r-in">                              <span class="st">"Coal [from e in f]"</span>, </span>
<span class="r-in">                              <span class="st">"Crude oil [from Production in USA]"</span><span class="op">)</span>, </span>
<span class="r-in">                            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Main activity producer electricity plants"</span>, </span>
<span class="r-in">                              <span class="st">"Wind turbines"</span>, </span>
<span class="r-in">                              <span class="st">"Oil refineries"</span>, </span>
<span class="r-in">                              <span class="st">"Coal mines"</span>, </span>
<span class="r-in">                              <span class="st">"Automobiles"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Product"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"Industry"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">a</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Main activity producer electricity plants</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]                                                 42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                                                        42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]                                        42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Wind turbines Oil refineries Coal mines</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]                     42             42         42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                            42             42         42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]            42             42         42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Automobiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]                   42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                          42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]          42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industry"</span>
<span class="r-in"><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, nrow <span class="op">=</span> <span class="fl">7</span>, ncol <span class="op">=</span> <span class="fl">1</span>, </span>
<span class="r-in">            dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Electricity"</span>, </span>
<span class="r-in">                              <span class="st">"Peat"</span>, </span>
<span class="r-in">                              <span class="st">"Hydro"</span>, </span>
<span class="r-in">                              <span class="st">"Crude oil"</span>,</span>
<span class="r-in">                              <span class="st">"Coal"</span>, </span>
<span class="r-in">                              <span class="st">"Hard coal (if no detail)"</span>, </span>
<span class="r-in">                              <span class="st">"Brown coal"</span><span class="op">)</span>, </span>
<span class="r-in">                            <span class="st">"phi"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Product"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"phi"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">v</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          phi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Peat                       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hydro                      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil                  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal                       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hard coal (if no detail)   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Brown coal                 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "phi"</span>
<span class="r-in"><span class="fu">vec_from_store_byname</span><span class="op">(</span><span class="va">a</span>, <span class="va">v</span>, a_piece <span class="op">=</span> <span class="st">"pref"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    phi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "phi"</span>
<span class="r-in"><span class="fu">vec_from_store_byname</span><span class="op">(</span><span class="va">a</span>, <span class="va">v</span>, a_piece <span class="op">=</span> <span class="st">"noun"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    phi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "phi"</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, nrow <span class="op">=</span> <span class="fl">7</span>, ncol <span class="op">=</span> <span class="fl">1</span>, </span>
<span class="r-in">             dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Electricity"</span>, </span>
<span class="r-in">                               <span class="st">"Peat"</span>, </span>
<span class="r-in">                               <span class="st">"USA"</span>, </span>
<span class="r-in">                               <span class="st">"c"</span>,</span>
<span class="r-in">                               <span class="st">"Coal"</span>, </span>
<span class="r-in">                               <span class="st">"Hard coal (if no detail)"</span>, </span>
<span class="r-in">                               <span class="st">"f"</span><span class="op">)</span>, </span>
<span class="r-in">                             <span class="st">"phi"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Product"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"phi"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">vec_from_store_byname</span><span class="op">(</span><span class="va">a</span>, <span class="va">v2</span>, a_piece <span class="op">=</span> <span class="st">"in"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    phi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "phi"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Works with lists</span></span>
<span class="r-in"><span class="va">v3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, nrow <span class="op">=</span> <span class="fl">7</span>, ncol <span class="op">=</span> <span class="fl">1</span>, </span>
<span class="r-in">             dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Electricity [from USA]"</span>, </span>
<span class="r-in">                               <span class="st">"Peat [from nowhere]"</span>, </span>
<span class="r-in">                               <span class="st">"Production [from GHA]"</span>, </span>
<span class="r-in">                               <span class="st">"e [from ZAF]"</span>,</span>
<span class="r-in">                               <span class="st">"Coal [from AUS]"</span>, </span>
<span class="r-in">                               <span class="st">"Hard coal (if no detail) [from GBR]"</span>, </span>
<span class="r-in">                               <span class="st">"b [from Nebraska]"</span><span class="op">)</span>, </span>
<span class="r-in">                             <span class="st">"phi"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="setrowtype.html">setrowtype</a></span><span class="op">(</span><span class="st">"Product"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="setcoltype.html">setcoltype</a></span><span class="op">(</span><span class="st">"phi"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">a_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">a</span><span class="op">)</span></span>
<span class="r-in"><span class="va">v_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">v3</span>, <span class="va">v3</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">vec_from_store_byname</span><span class="op">(</span><span class="va">a_list</span>, <span class="va">v_list</span>, a_piece <span class="op">=</span> <span class="st">"in"</span>, v_piece <span class="op">=</span> <span class="st">"from"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    phi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "phi"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    phi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Electricity [from b in c]           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coal [from e in f]                  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude oil [from Production in USA]   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "phi"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Also works in a data frame</span></span>
<span class="r-in"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">a</span>, <span class="va">a</span><span class="op">)</span>, </span>
<span class="r-in">                     v <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">v3</span>, <span class="va">v3</span>, <span class="va">v3</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span class="r-in">    actual <span class="op">=</span> <span class="fu">vec_from_store_byname</span><span class="op">(</span>a <span class="op">=</span> <span class="va">a</span>, v <span class="op">=</span> <span class="va">v</span>, a_piece <span class="op">=</span> <span class="st">"in"</span>, v_piece <span class="op">=</span> <span class="st">"from"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   a             v             actual       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">&lt;dbl [3 × 5]&gt;</span> <span style="color: #949494;">&lt;int [7 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [3 × 1]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">&lt;dbl [3 × 5]&gt;</span> <span style="color: #949494;">&lt;int [7 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [3 × 1]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> <span style="color: #949494;">&lt;dbl [3 × 5]&gt;</span> <span style="color: #949494;">&lt;int [7 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [3 × 1]&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

